<<<<<<< HEAD
=======

>>>>>>> 28c6f978a4ba08bdae3bd531dac6bebf07cd4f5d
var mongoose = require('../../lib');


// import the global schema, this can be done in any file that needs the model
require('./person.js')();

// grab the person model object
<<<<<<< HEAD
var Person = mongoose.model('Person');
=======
var Person = mongoose.model("Person");
>>>>>>> 28c6f978a4ba08bdae3bd531dac6bebf07cd4f5d

// connect to a server to do a quick write / read example

mongoose.connect('mongodb://localhost/persons', function(err) {
<<<<<<< HEAD
  if (err) {
    throw err;
  }

  Person.create({
    name: 'bill',
    age: 25,
    birthday: new Date().setFullYear((new Date().getFullYear() - 25))
  }, function(err, bill) {
    if (err) {
      throw err;
    }
    console.log('People added to db: %s', bill.toString());
    Person.find({}, function(err, people) {
      if (err) {
        throw err;
      }

      people.forEach(function(person) {
        console.log('People in the db: %s', person.toString());
      });

      // make sure to clean things up after we're done
      setTimeout(function() {
        cleanup();
      }, 2000);
=======
  if (err) throw err;

  Person.create({
    name : 'bill',
    age : 25,
    birthday : new Date().setFullYear((new Date().getFullYear() - 25))
  }, function(err, bill) {
    if (err) throw err;
    console.log("People added to db: %s", bill.toString());
    Person.find({}, function(err, people) {
      if (err) throw err;

      people.forEach(function(person) {
        console.log("People in the db: %s", person.toString());
      });

      // make sure to clean things up after we're done
      setTimeout(function() { cleanup(); }, 2000);
>>>>>>> 28c6f978a4ba08bdae3bd531dac6bebf07cd4f5d
    });
  });
});

function cleanup() {
  Person.remove(function() {
    mongoose.disconnect();
  });
}
