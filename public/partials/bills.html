<!--Bills stuff -->
<byt-navbar></byt-navbar>
<section class="row col-lg-6 col-lg-offset-3 main_content">
	<section class="row">					
		<a href="https://youtu.be/EbCn4uEfbtM">Tutorial</a>				
		<section class="dashboard_nav">
			<ul>							
				<li role="presentation" class="dashboard_nav_second" ng-click="dashboard_spinner=!dashboard_spinner">
					<a class="" href="/#/dashboard">
						<span ><i ng-class="{'fa fa-refresh fa-spin': dashboard_spinner, '': !dashboard_spinner}"></i></span> Dashboard
					</a>									
				</li>
				<li role="presentation" class="dashboard_nav_second" ng-click="income_spinner=!income_spinner">
					<a class="" href="/#/income">
						<span ><i ng-class="{'fa fa-refresh fa-spin': income_spinner, '': !income_spinner}"></i></span> Income
					</a>									
				</li>
				<li role="presentation" class="dashboard_nav_third">
					<a href="/#/bills">Bills</a>
					<i role="button" class="glyphicon glyphicon-question-sign" data-toggle="modal" data-target="#billsModal"></i>
					<section id="billsModal" class="modal fade" role="dialog">
						<section class="modal-dialog">
							<!-- Modal content-->
							<section class="modal-content">
								<section class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h4 class="modal-title">Bills</h4>
								</section>
								<section class="modal-body">
									<iframe width="200" height="180" src="https://www.youtube.com/embed/Je6PxS-6Ljs" frameborder="0" allowfullscreen></iframe>
									<p>-----</p>
									<p>Bills are fixed monthly expenses that usually take place on a given day. A company usually initiates the charge and that charge usually takes place regardless of whether you may have used a product or service. A good example of a bill is a phone bill.</p>
								</section>
								<section class="modal-footer">
									<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								</section>
							</section>
						</section>
					</section>
				</li>
				<li role="presentation" class="dashboard_nav_fourth" ng-click="expenses_spinner=!expenses_spinner">
					<a class="" href="/#/expenses">
						<span ><i ng-class="{'fa fa-refresh fa-spin': expenses_spinner, '': !expenses_spinner}"></i></span> Expenses
					</a>									
				</li>
				<li role="presentation" class="dashboard_nav_fifth" ng-click="edu_spinner=!edu_spinner">
					<a class="" href="/#/education">
						<span ><i ng-class="{'fa fa-refresh fa-spin': edu_spinner, '': !edu_spinner}"></i></span> Education
					</a>									
				</li>
			</ul>	
		</section>
	</section>
	<section ng-show="bills.length > 0" style="font-size: 12px; text-align:center;">
		Last bill was entered on {{lastVisit.date | date:'MM/dd'}}
	</section>
	<section class="row" id="allBillTransactions">
		<section class="expenses">
			<section ng-show="bills.length > 0" class="panel-group all-expenses" id="accordion" role="tablist" aria-multiselectable="true">
					<section class="panel panel-info" >
					<section class="panel-heading" role="tab" id="headingOne">
							<section class="panel-title" style="font-size:14px;">      									
							<a role="button" data-toggle="collapse" data-target="#collapse" aria-expanded="true" aria-controls="collapse" style="text-decoration:none" ng-click="byt_active=!byt_active">
							<i ng-class="{ 'glyphicon glyphicon-plus': !byt_active, 'glyphicon glyphicon-minus': byt_active }"></i>  All bills</a>
							</section>
					</section>
					<section id="collapse" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
						<section ng-repeat="bill in bills">
							<section class="panel-body" style="padding:13px">
								<section style="width:20%; float:left; text-align:center; display:inline">{{bill.date | date:'MM/dd'}}</section>
								<section style="width:40%; float:left; text-align:center; display:inline">{{bill.category}}</section>
								<section style="width:30%; float:left; text-align:center; display:inline">{{bill.amount | number:2}}
								</section>
								<section role="button" style="width:10%; float:right; text-align:center; display:inline" ng-click="removeBill($index)"><i class="glyphicon glyphicon-remove"></i></section>
							</section>
						</section>
						</section>
				</section>    							
			</section>
			<section class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
					<section class="panel panel-info" ng-repeat="category in categories | orderBy: '-total'" ng-if="category.total > 0">
					<section class="panel-heading" role="tab" id="headingOne">
							<section class="panel-title" style="font-size:14px;">      									
							<a role="button" data-toggle="collapse" data-target="#collapse{{$index}}" aria-expanded="true" aria-controls="collapse{{$index}}" style="text-decoration:none" ng-click="active=!active">
							<i ng-class="{ 'glyphicon glyphicon-plus': !active, 'glyphicon glyphicon-minus': active}"></i>  {{category.category}} - {{category.total | number:0}}</a>
							</section>
					</section>
					<section id="collapse{{$parent.$index}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
						<section ng-repeat="subcategory in category.subCategory | orderBy: '-total'" ng-if="subcategory.total > 0">
							<section class="panel-body" style="padding:13px">
								<section style="width:50%; float:left; text-align:center; display:inline">{{subcategory.name}}</section>
								<section style="width:50%; float:right; text-align:center; display:inline">{{subcategory.total | number:0}}</section>
							</section>
						</section>
						</section>
				</section>    							
			</section>
	    </section>
	</section>
	<section> <!-- novalidate disables brower validation -->
		<form novalidate name='monthlyBillForm' ng-submit='billForm()'>
			<section class="form-group">
				<label>Category</label>
				<section ng-messages="monthlyBillForm.monthlyBillCategory.$error">
						<section ng-message="required" class="validation_1">*Required</section>
				</section>

				<select class="form-control" ng-options="category.id as category.value for category in monthlyBillsCategories" name="monthlyBillCategory" ng-model='category' required>
					<option value="" selected disabled>Please choose</option>								
				</select>								
			</section>
			<section class="form-group">
				<label>Type</label>
				<section ng-messages="monthlyBillForm.monthlyBillType.$error">
						<section ng-message="required" class="validation_1">*Required</section>
				</section>
				<select ng-disabled="monthlyBillForm.monthlyBillCategory.$invalid" class="form-control" ng-model="subCategory" name="monthlyBillType" ng-options="subCategory.value as subCategory.value for subCategory in monthlyBillsSubCategories[category]" required>
					<option value="">Please choose</option>					
				</select>	
			</section>
			<section class="form-group">
				<label>Amount</label>
				<section ng-messages="monthlyBillForm.monthlyBillAmount.$error"> <!-- monthlyExpForm.monthlyExpAmount.$error is an angular expression -->
						<section ng-message="required" class="validation_1">*Required</section>
				</section>
				<!-- form-control is a bootstarp class. step attribute specifies the legal number intervals for an input field -->
				<input class='form-control' type='number' placeholder='1550' name="monthlyBillAmount" ng-model='amount' step="any" required>								
			</section>
			<!-- Bill question modal -->
			<section class="form-group">
				<label>Bill paid</label> <i role="button" class="glyphicon glyphicon-question-sign" data-toggle="modal" data-target="#myModal"></i>
				<section id="myModal" class="modal fade" role="dialog">
					<section class="modal-dialog">
						<!-- Modal content-->
						<section class="modal-content">
							<section class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">Bill paid?</h4>
							</section>
							<section class="modal-body">
								<p>Only record a bill payment after you have already paid the bill - not before. Doing so will ensure that the data that you are entering is accurate.</p>
							</section>
							<section class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							</section>
						</section>
					</section>
				</section>
				<select class="form-control" name="monthlyBillQuestion" ng-model='question'>
					<option value="" selected disabled>Please choose</option>
					<option value="Yes">Yes - I have already paid the bill described above</option>						
				</select>								
			</section>		
			<section class="form-group">
				<button ng-click="goToAllBills()" type="submit" ng-disabled="monthlyBillForm.$invalid" class="btn btn-default btn-block btn-lg">Add Bill</button>
			</section>	
		</form>
	</section>
</section>