<!DOCTYPE html>
	<html>
		<head>
			<meta name="viewport" content="width=device-width">
			<meta name="viewport" content="initial-scale=1.0">
			<title>Dashboard - BYT</title>
			<!--boostrap-->
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
			<!--my css -->
			<link rel="stylesheet" href="/css/styles.css">	
			<!--angular -->
			<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
			<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular-messages.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
			<!--my javascript -->
			<script src="/javascripts/angularApp.js"></script>
			<script src="/javascripts/controllers/AuthCtrl.js"></script>
			<script src="/javascripts/controllers/BillsCtrl.js"></script>
			<script src="/javascripts/controllers/DashboardCtrl.js"></script>
			<script src="/javascripts/controllers/IncomeCtrl.js"></script>
			<script src="/javascripts/controllers/MonthlyExpensesCtrl.js"></script>
			<script src="/javascripts/controllers/NavCtrl.js"></script>
			<script src="/javascripts/factories/authFactory.js"></script>
			<script src="/javascripts/factories/billsFactory.js"></script>
			<script src="/javascripts/factories/incomeFactory.js"></script>
			<script src="/javascripts/factories/monthlyExpensesFactory.js"></script>
			<script src="/javascripts/directives/directives.js"></script>				
		</head>
		<body ng-app="Dashboard">
			<div class="container">
				<div class="row" ng-controller="NavCtrl">
					<nav class="navbar navbar-default">
						<ul class="nav navbar-nav">
							<li ng-show="isLoggedIn()"><a>Wassup {{ currentUser() }}</a></li>
							<li ng-show="isLoggedIn()"><a href="" ng-click="logOut()">Log Out</a></li>
							<li ng-hide="isLoggedIn()"><a href="/#/login">Log In</a></li>
							<li ng-hide="isLoggedIn()"><a href="/#/register">Register</a></li>
						</ul>
					</nav>				
				</div>				
				<div class="row col-md-10 col-md-offset-1 main_content">					
					<ui-view></ui-view>
				</div>
			</div>
			<!--Home-->
			<script type="text/ng-template" id="/home.html">
				<div class="page-header">
					<h3>Build Your Tomorrow (BYT) is an app that allows you to track your income and expenses. By doing so, you'll become more aware of your financial picture and spending habits. You can then use that knowledge to make necessary changes or adjustments.</h3>
				</div>
			</script>
			<!--Register-->
			<script type="text/ng-template" id="/register.html">
				<div class="page-header">
					<h1>Let's budget</h1>
				</div>
				<div ng-show="error" class="alert alert-danger row">
					<span>{{ error.message }}</span>
				</div>
				<form ng-submit="register()" style="margin-top:30px;">
					<h3>Register</h3>
					<div class="form-group">
						<input type="text" class="form-control" placeholder="Username" ng-model="user.username" required>
					</div>
					<div class="form-group">
						<input type="password" class="form-control" placeholder="Password" ng-model="user.password" required>
					</div>
					<button type="submit" class="btn btn-primary">Register</button>
				</form>
			</script>
			<!--Login-->
			<script type="text/ng-template" id="/login.html">
				<div class="page-header">
					<h1>Let's budget</h1>
				</div>
				<div ng-show="error" class="alert alert-danger row">
					<span>{{ error.message }}</span>
				</div>
				<form ng-submit="logIn()" style="margin-top:30px;">
					<h3>Log In</h3>
					<div class="form-group">
					  <input type="text" class="form-control" placeholder="Username" ng-model="user.username" required>
					</div>
					<div class="form-group">
					  <input type="password" class="form-control" placeholder="Password" ng-model="user.password" required>
					</div>
					<button type="submit" class="btn btn-primary">Log In</button>
				</form>
			</script>
			<!--Dashboard stuff -->
			<script type="text/ng-template" id="/dashboard.html">
				<section class="row">	
					<section class="dashboard_nav">
						<ul ng-show='{{ isLoggedIn() }}'>
							<li role="presentation" class="dashboard_nav_first"><a href="/#/dashboard">Dashboard</a></li>
							<li role="presentation" class="dashboard_nav_second"><a href="/#/income">Income</a></li>
							<li role="presentation" class="dashboard_nav_third"><a href="/#/bills">Bills</a></li>
							<li role="presentation" class="dashboard_nav_fourth"><a href="/#/expenses">Expenses</a></li>
						</ul>	
					</section>
				</section>
				<section class="row">
					<section class="table-responsive">
						<section class="dashboard_overview">
							<table class="table">		
								<tbody>
									<tr>
										<td class="dashboard_overview_1">Total income</td>
										<td class="dashboard_overview_2">{{totalIncome | number:0}}</td>		
									</tr>
									<tr>
										<td class="dashboard_overview_1">Total bills</td>
										<td class="dashboard_overview_2">{{totalBills | number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_overview_1">Total expenses</td>
										<td class="dashboard_overview_2">{{totalSpent | number:0}}</td>
									</tr>	
									<tr>
										<td class="dashboard_overview_1">Savings</td>
										<td class="dashboard_overview_2">{{totalIncome - totalBills - totalSpent|number:0}}</td>
									</tr>	
								</tbody>
							</table>
						</section>
					</section>
				</section>					
				<section class="row">
					<section class="table-responsive">
						<section class="dashboard_analysis">
							<table class="table">	
								<tbody>
									<tr>
										<td class="dashboard_analysis_1">Spending limit</td>
										<td class="dashboard_analysis_2">{{spendingLimit|number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_analysis_1">Total spent</td>
										<td class="dashboard_analysis_2">{{totalSpent|number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_analysis_1">Leftover</td>
										<td class="dashboard_analysis_2">{{leftOver|number:0}}</td>
									</tr>
									<tr style='background-color:{{ specialVarUpBy }}'>
										<td class="dashboard_analysis_1">{{specialVarUpByWord}}</td>
										<td class="dashboard_analysis_2">{{upBy|number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_analysis_1">Daily budget</td>
										<td class="dashboard_analysis_2">{{dailyBudget|number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_analysis_1">Days left</td>
										<td class="dashboard_analysis_2">{{daysLeft|number:0}}</td>
									</tr>
									<tr>
										<td class="dashboard_analysis_1">Period</td>
										<td class="dashboard_analysis_2">{{periodStart| date:'MM/dd/yyyy'}} - {{periodEnd}}</td>
									</tr>									
								</tbody>
							</table>
						</section>
					</section>								
				</section>
				<!--Spending limit form -->
				<section> <!-- novalidate disables brower validation -->
					<form novalidate name='spendingLimitForm1' ng-submit='spendingLimitForm()'>
						<div class="form-group">
							<label>Set spending limit</label>
							<div ng-messages="spendingLimitForm1.spendingLimit.$error">
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<input class='form-control' type='number' placeholder='1390' name="spendingLimit" ng-model='amount1' required>
						</div>
						<div class="form-group">
							<button type="submit" ng-disabled="spendingLimitForm1.$invalid" class="btn btn-default btn-block btn-lg">Add Spending Limit</button>
						</div>									
					</form>
				</section>	
			</script>
			<!--Income stuff -->
			<script type="text/ng-template" id="/income.html">
				<section class="row">	
					<section class="dashboard_nav">
						<ul ng-show='{{ isLoggedIn() }}'>
							<li role="presentation" class="dashboard_nav_first"><a href="/#/dashboard">Dashboard</a></li>
							<li role="presentation" class="dashboard_nav_second"><a href="/#/income">Income</a></li>
							<li role="presentation" class="dashboard_nav_third"><a href="/#/bills">Bills</a></li>
							<li role="presentation" class="dashboard_nav_fourth"><a href="/#/expenses">Expenses</a></li>
						</ul>	
					</section>
				</section>
				<section class="row">
					<section class="table-responsive">
						<section class="income">
							<table class="table">	
								<thead ng-repeat='item in allIncome'>
									<tr>
										<td class="income_1">
											<div contenteditable="true" ng-model="item.description" a-reg-function="updateIncomeDesc(item)"></div>
										</td>
										<td class="income_2">
											<div contenteditable="true" ng-model="item.amount" calc-total-func="updateIncomeAmount(item)"></div>
										</td>
									</tr>
								</thead>	
								<tbody>
									<tr>
										<td class="income_3">Total income</td>
										<td class="income_4">{{totalIncome | number:0}}</td>
									</tr>							
								</tbody>
							</table>
						</section>
					</section>
				</section>	
				<section> <!-- novalidate disables brower validation -->
					<form novalidate name='monthlyIncomeForm' ng-submit='incomeForm()'>
						<div class="form-group">
							<label>Description</label>
							<div ng-messages="monthlyIncomeForm.monthlyIncomeDescription.$error">
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<input class='form-control' type='text' placeholder='Job' name="monthlyIncomeDescription" ng-model='description' required>								
						</div>
						<div class="form-group">
							<label>Amount</label>
							<div ng-messages="monthlyIncomeForm.monthlyIncomeAmount.$error"> <!-- monthlyIncomeForm.monthlyExpAmount.$error is an angular expression -->
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<!-- form-control is a bootstarp class. step attribute specifies the legal number intervals for an input field -->
							<input class='form-control' type='number' placeholder='1700' name="monthlyIncomeAmount" ng-model='amount' step="any" required>								
						</div>			
						<div class="form-group">
							<button type="submit" ng-disabled="monthlyIncomeForm.$invalid" class="btn btn-default btn-block btn-lg">Add Income</button>
						</div>									
					</form>
				</section>
			</script>	
			<!--Bills stuff -->
			<script type="text/ng-template" id="/bills.html">
				<section class="row">	
					<section class="dashboard_nav">
						<ul ng-show='{{ isLoggedIn() }}'>
							<li role="presentation" class="dashboard_nav_first"><a href="/#/dashboard">Dashboard</a></li>
							<li role="presentation" class="dashboard_nav_second"><a href="/#/income">Income</a></li>
							<li role="presentation" class="dashboard_nav_third"><a href="/#/bills">Bills</a></li>
							<li role="presentation" class="dashboard_nav_fourth"><a href="/#/expenses">Expenses</a></li>
						</ul>	
					</section>
				</section>
				<section class="row">
					<section class="table-responsive">
						<section class="bills">
							<table class="table">					
								<thead ng-repeat='bill in bills'>
									<tr>
										<td class="bills_1">
											<div contenteditable="true" ng-model="bill.description" a-reg-function="updateBillDesc(bill)"></div>
										</td>
										<td class="bills_2">
											<div contenteditable="true" ng-model="bill.amount" calc-total-func="updateBillAmount(bill)"></div>
										</td>																				
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="bills_3">Total bills</td>
										<td class="bills_4">{{totalBills | number:0}}</td>
									</tr>							
								</tbody>
							</table>
						</section>
					</section>
				</section>
				<section> <!-- novalidate disables brower validation -->
					<form novalidate name='monthlyBillForm' ng-submit='billForm()'>
						<div class="form-group">
							<label>Description</label>
							<div ng-messages="monthlyBillForm.monthlyBillDescription.$error">
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<input class='form-control' type='text' placeholder='Rent' name="monthlyBillDescription" ng-model='description' required>								
						</div>
						<div class="form-group">
							<label>Amount</label>
							<div ng-messages="monthlyBillForm.monthlyBillAmount.$error"> <!-- monthlyBillForm.monthlyExpAmount.$error is an angular expression -->
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<!-- form-control is a bootstarp class. step attribute specifies the legal number intervals for an input field -->
							<input class='form-control' type='number' placeholder='1450' name="monthlyBillAmount" ng-model='amount' step="any" required>								
						</div>			
						<div class="form-group">
							<button type="submit" ng-disabled="monthlyBillForm.$invalid" class="btn btn-default btn-block btn-lg">Add Bill</button>
						</div>									
					</form>
				</section>	
			</script>	
			<!--Monthly expenses --> 
			<script type="text/ng-template" id="/expenses.html">
				<section class="row">	
					<section class="dashboard_nav">
						<ul ng-show='{{ isLoggedIn() }}'>
							<li role="presentation" class="dashboard_nav_first"><a href="/#/dashboard">Dashboard</a></li>
							<li role="presentation" class="dashboard_nav_second"><a href="/#/income">Income</a></li>
							<li role="presentation" class="dashboard_nav_third"><a href="/#/bills">Bills</a></li>
							<li role="presentation" class="dashboard_nav_fourth"><a href="/#/expenses">Expenses</a></li>
						</ul>	
					</section>
				</section>
				<section class="row">
					<section class="table-responsive">
						<section class="expenses">
							<table class="table">
								<thead ng-repeat='expense in monthlyExpenses'>
									<tr>								
										<td class="expenses_1">
											<div contenteditable="true" ng-model="expense.description" a-reg-function="updateExpDescription(expense)"></div>
										</td>				
										<td class="expenses_2">
											<div contenteditable="true" ng-model="expense.amount" calc-total-func="updateExpAmount(expense)"></div>
										</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td class="expenses_3">Total expenses</td>
										<td class="expenses_4">{{totalSpent | number:0}}</td>
									</tr>
								</tbody>
							</table>
						</section>
					</section>
				</section>
				<section> <!-- novalidate disables brower validation -->
					<form novalidate name='monthlyExpForm' ng-submit='monthlyExpenseForm()'>
						<div class="form-group">
							<label>Description</label>
							<div ng-messages="monthlyExpForm.monthlyExpDescription.$error">
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<input class='form-control' type='text' placeholder='Starbucks' name="monthlyExpDescription" ng-model='description' required>								
						</div>
						<div class="form-group">
							<label>Amount</label>
							<div ng-messages="monthlyExpForm.monthlyExpAmount.$error"> <!-- monthlyExpForm.monthlyExpAmount.$error is an angular expression -->
  								<div ng-message="required" class="validation_1">*Required</div>
							</div>
							<!-- form-control is a bootstarp class. step attribute specifies the legal number intervals for an input field -->
							<input class='form-control' type='number' placeholder='5.49' name="monthlyExpAmount" ng-model='amount' step="any" required>								
						</div>			
						<div class="form-group">
							<button type="submit" ng-disabled="monthlyExpForm.$invalid" class="btn btn-default btn-block btn-lg">Add Expense</button>
						</div>									
					</form>
				</section>				
			</script>	
		</body>
	</html>